(this["webpackJsonpuber-front"]=this["webpackJsonpuber-front"]||[]).push([[0],{110:function(e,t,a){},148:function(e,t,a){"use strict";a.r(t);var s=a(2),r=a(0),n=a.n(r),i=a(9),o=a.n(i),c=(a(110),a(12)),l=a(13),d=a(15),u=a(14),h=a(5),p=a(192),b=function(e){return Object(p.a)({layout:{maxHeight:"100%",height:"100%"}})},m=a(20),j=a(17),f=a(29),g=a(193),v=a(183),x=a(180),O=a(190),A=a(181),y=a(38),C=a.n(y),w=a(41),S=a(176),k=function(e){return Object(p.a)({paper:{paddingTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}})},P=a(23),N=a.n(P),T=function(e){return Object(p.a)({paper:{paddingTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}})},I=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).state=void 0,s.apiUrl="http://localhost:3001/users/register",s.onChangeName=function(e){e.preventDefault();var t=e.target.value;s.setState({user:{name:t,email:s.state.user.email,password:s.state.user.password}})},s.onChangeEmail=function(e){e.preventDefault();var t=e.target.value;s.setState({user:{name:s.state.user.name,email:t,password:s.state.user.password}})},s.onChangePassword=function(e){e.preventDefault();var t=e.target.value;s.setState({user:{name:s.state.user.name,email:s.state.user.email,password:t}})},s.onChangeConfirmPassword=function(e){e.preventDefault(),e.target.value===s.state.user.password?s.setState({passwdStatus:!0}):s.setState({passwdStatus:!1})},s.state={user:{id:1,name:"",email:"",password:""},passwdStatus:!1},s.onSubmit=s.onSubmit.bind(Object(f.a)(s)),s}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.classes;return Object(s.jsxs)(S.a,{component:"main",maxWidth:"xs",children:[Object(s.jsx)(x.a,{}),Object(s.jsxs)("div",{className:e.paper,children:[Object(s.jsx)(g.a,{className:e.avatar,children:Object(s.jsx)(C.a,{})}),Object(s.jsx)(w.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(s.jsxs)("form",{className:e.form,noValidate:!0,autoComplete:"off",onSubmit:this.onSubmit,children:[Object(s.jsxs)(A.a,{container:!0,spacing:2,children:[Object(s.jsx)(A.a,{item:!0,xs:12,children:Object(s.jsx)(O.a,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0,onChange:this.onChangeName})}),Object(s.jsx)(A.a,{item:!0,xs:12,children:Object(s.jsx)(O.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:this.onChangeEmail})}),Object(s.jsx)(A.a,{item:!0,xs:12,children:Object(s.jsx)(O.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:this.onChangePassword})}),Object(s.jsx)(A.a,{item:!0,xs:12,children:Object(s.jsx)(O.a,{variant:"outlined",required:!0,fullWidth:!0,name:"confirm_password",label:"Confirm Password",type:"password",id:"confirm_password",autoComplete:"current-password",onChange:this.onChangeConfirmPassword})})]}),Object(s.jsx)(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"Sign Up"}),Object(s.jsx)(A.a,{container:!0,justify:"flex-end",children:Object(s.jsx)(A.a,{item:!0,children:Object(s.jsx)(m.b,{to:"/auth/signIn",children:"Already have an account? Sign in"})})})]})]}),Object(s.jsx)(m.a,{children:Object(s.jsxs)(j.d,{children:[Object(s.jsx)(j.b,{exact:!0,path:"/auth/signIn",component:U.Display}),Object(s.jsx)(j.a,{to:"/auth/signUp"})]})})]})}},{key:"onSubmit",value:function(e){if(e.preventDefault(),this.state.passwdStatus)return console.log(this.state),N.a.post(this.apiUrl,{name:this.state.user.name,email:this.state.user.email,password:this.state.user.password},{headers:{"Content-Type":"application/json; charset=UTF-8"}}).then((function(e){console.log(e)})).catch((function(e){console.log(e.response)}))}}]),a}(n.a.PureComponent);I.Display=Object(h.a)(T)(I);var D=function(e){return Object(p.a)({paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}})},M=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).state=void 0,s.apiUrl="http://localhost:3001/users/resetpswd/",s.onChangePassword=function(e){e.preventDefault();var t=e.target.value;s.setState({password:t})},s.onChangeConfirmPassword=function(e){e.preventDefault(),e.target.value===s.state.password?s.setState({passwdStatus:!0}):s.setState({passwdStatus:!1})},s.state={password:"",resetToken:s.token(e),passwdStatus:!1},s.handleSubmit=s.handleSubmit.bind(Object(f.a)(s)),s.token(e),console.log(s.state),s}return Object(l.a)(a,[{key:"token",value:function(e){return e.match.params.token}},{key:"render",value:function(){var e=this.props.classes;return Object(s.jsxs)(S.a,{component:"main",maxWidth:"xs",children:[Object(s.jsx)(x.a,{}),Object(s.jsxs)("div",{className:e.paper,children:[Object(s.jsx)(g.a,{className:e.avatar,children:Object(s.jsx)(C.a,{})}),Object(s.jsx)(w.a,{component:"h1",variant:"h5",children:"Reset your Password"}),Object(s.jsxs)("form",{className:e.form,noValidate:!0,autoComplete:"off",onSubmit:this.handleSubmit,children:[Object(s.jsxs)(A.a,{container:!0,spacing:2,children:[Object(s.jsx)(A.a,{item:!0,xs:12,children:Object(s.jsx)(O.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:this.onChangePassword})}),Object(s.jsx)(A.a,{item:!0,xs:12,children:Object(s.jsx)(O.a,{variant:"outlined",required:!0,fullWidth:!0,name:"confirm_password",label:"Confirm Password",type:"password",id:"confirm_password",autoComplete:"current-password",onChange:this.onChangeConfirmPassword})})]}),Object(s.jsx)(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"Send"})]})]}),Object(s.jsx)(m.a,{children:Object(s.jsx)(j.d,{children:Object(s.jsx)(j.a,{to:"/auth/resetpassword"})})})]})}},{key:"handleSubmit",value:function(e){return e.preventDefault(),N.a.post(this.apiUrl,{password:this.state.password,token:this.state.resetToken},{headers:{"Content-Type":"application/json; charset=UTF-8"}}).then((function(e){console.log(e)})).catch((function(e){console.log(e.response)}))}}]),a}(n.a.PureComponent);M.Display=Object(h.a)(D)(M);var U=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).state=void 0,s.apiUrl="http://localhost:3001/users/login/",s.onChangeEmail=function(e){e.preventDefault();var t=e.target.value;s.setState({email:t})},s.onChangePassword=function(e){e.preventDefault();var t=e.target.value;s.setState({password:t})},s.state={id:1,email:"",password:"",redirect:!1},s.onSubmit=s.onSubmit.bind(Object(f.a)(s)),s}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.classes;return this.state.redirect?Object(s.jsx)(j.a,{to:"/drive"}):Object(s.jsxs)(S.a,{component:"main",maxWidth:"xs",children:[Object(s.jsx)(x.a,{}),Object(s.jsxs)("div",{className:e.paper,children:[Object(s.jsx)(g.a,{className:e.avatar,children:Object(s.jsx)(C.a,{})}),Object(s.jsx)(w.a,{component:"h1",variant:"h5",children:"Sign In"}),Object(s.jsxs)("form",{className:e.form,noValidate:!0,autoComplete:"off",onSubmit:this.onSubmit,children:[Object(s.jsxs)(A.a,{container:!0,spacing:2,children:[Object(s.jsx)(A.a,{item:!0,xs:12,children:Object(s.jsx)(O.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:this.onChangeEmail})}),Object(s.jsx)(A.a,{item:!0,xs:12,children:Object(s.jsx)(O.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:this.onChangePassword})})]}),Object(s.jsx)(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"Sign In"}),Object(s.jsx)(A.a,{container:!0,justify:"flex-end",children:Object(s.jsx)(A.a,{item:!0,children:Object(s.jsx)(m.b,{to:"/auth/signUp",children:"Don't have an account? Sign up"})})}),Object(s.jsx)(A.a,{container:!0,justify:"flex-end",children:Object(s.jsx)(A.a,{item:!0,children:Object(s.jsx)(m.b,{to:"/auth/forgotPassword",children:"Forgot password ?"})})})]})]}),Object(s.jsx)(m.a,{children:Object(s.jsxs)(j.d,{children:[Object(s.jsx)(j.b,{exact:!0,path:"/auth/signUp",children:Object(s.jsx)(I.Display,{})}),Object(s.jsx)(j.b,{exact:!0,path:"/auth/forgotPassword",children:Object(s.jsx)(M.Display,{})}),Object(s.jsx)(j.a,{to:"/auth/signIn"})]})})]})}},{key:"onSubmit",value:function(e){var t=this;return e.preventDefault(),N.a.post(this.apiUrl,{email:this.state.email,password:this.state.password},{headers:{"Content-Type":"application/json; charset=UTF-8"}}).then((function(e){console.log("success"+e.data.data.token),localStorage.setItem("token",e.data.data.token),localStorage.setItem("email",t.state.email),t.setState({redirect:!0})})).catch((function(e){console.log(e.response)}))}}]),a}(n.a.PureComponent);U.Display=Object(h.a)(k)(U);var L=function(e){return Object(p.a)({paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}})},H=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).state=void 0,s.apiUrl="http://localhost:3001/users/forgotpswd/",s.handleChange=function(e){e.preventDefault();var t=e.target.value;s.setState({email:t})},s.state={email:""},s.handleSubmit=s.handleSubmit.bind(Object(f.a)(s)),s}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.classes;return Object(s.jsxs)(S.a,{component:"main",maxWidth:"xs",children:[Object(s.jsx)(x.a,{}),Object(s.jsxs)("div",{className:e.paper,children:[Object(s.jsx)(g.a,{className:e.avatar,children:Object(s.jsx)(C.a,{})}),Object(s.jsx)(w.a,{component:"h1",variant:"h5",children:"Forgot Your Password ?"}),Object(s.jsxs)("form",{className:e.form,noValidate:!0,autoComplete:"off",onSubmit:this.handleSubmit,children:[Object(s.jsx)(A.a,{container:!0,spacing:2,children:Object(s.jsx)(A.a,{item:!0,xs:12,children:Object(s.jsx)(O.a,{value:this.state.email,variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:this.handleChange})})}),Object(s.jsx)(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"Send"})]})]})]})}},{key:"handleSubmit",value:function(e){return e.preventDefault(),N.a.post(this.apiUrl,{email:this.state.email},{headers:{"Content-Type":"application/json; charset=UTF-8"}}).then((function(e){console.log(e)})).catch((function(e){console.log(e.response)}))}}]),a}(n.a.PureComponent);H.Display=Object(h.a)(L)(H);var V=a(35),z=a(184),B=a(185),R=a(186),X=a(187),F=function(e){return Object(p.a)({root:{display:"block",position:"relative",backgroundColor:"#000000",height:"100%",color:"white",opacity:.9,borderRadius:0,zIndex:1,overflow:"hidden"},media:{height:"0px",paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},avatar:{margin:"10px",backgroundColor:"white",color:"#000000"},input:{backgroundColor:"white",borderRadius:"4px",color:"black",margin:"10px",width:"200px"},subHeader:{" & span":{color:"white"}},iconButton:{marginTop:"10px",backgroundColor:"white",color:"blue"},validateButton:{backgroundColor:"white",color:"blue"},select:{backgroundColor:"white",borderRadius:"4px",color:"black"},addIconButton:{margin:10,backgroundColor:"white",color:"blue"},inputSelect:{backgroundColor:"white",borderRadius:"4px",color:"black",margin:"10px"},switchButton:{position:"fixed",bottom:"10px",left:"7%",marginLeft:"-104.5px",margin:"10px"},stepsInfo:{overflow:"auto",height:"300px",padding:0},blockSearch:{alignItems:"center"},addressesInfo:{overflow:"auto",height:"60px",padding:0}})},q=a(93),W=a.n(q),E=a(94),J=a.n(E),Z=a(97),Y=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).state=void 0,s.getCoordFromApi=function(){var e,t=s.state.addressChoice,a=[];""!==t&&" "!==t?(N.a.get("https://api.mapbox.com/geocoding/v5/mapbox.places/"+t+".json?country=fr&access_token=pk.eyJ1IjoibWFyY2RldmVsb3BlciIsImEiOiJja2l1M2Y4bHgydzVuMnVxam41NTN1dGRrIn0.5EyahHfPXV8fdllizu949A").then((function(t){if(t.data.features)if((e=t.data.features).length>0){alert("Adresse trouv\xe9e. La liste \xe0 \xe9t\xe9 mise \xe0 jour.");var s,r=Object(V.a)(e);try{for(r.s();!(s=r.n()).done;){var n=s.value;a.push({value:{lat:n.geometry.coordinates[1],lng:n.geometry.coordinates[0]},label:n.place_name})}}catch(i){r.e(i)}finally{r.f()}}else alert("Aucune adresse trouv\xe9 pour ce terme.")})).catch((function(e){console.error(e)})),s.setState({addressChoice:s.state.addressChoice,tabAdressesName:a,addresses:s.state.addresses,start:s.state.start})):alert("veuillez entrer une adresse.")},s.handleChange=function(e){s.setState({addressChoice:e.label,tabAdressesName:s.state.tabAdressesName,addresses:s.state.addresses,start:s.state.start,steps:s.state.steps})},s.searchItinary=function(e){var t=[],a=Object(f.a)(s);s.state.addresses.length>0?(s.setState({canSave:!0}),alert("Calcul de l'init\xe9raire, veuillez patienter..."),N.a.post("http://127.0.0.1:3001/itinerary",{start:s.state.start,coords:s.state.addresses,len:s.state.addresses.length},{headers:{"Content-Type":"application/json; charset=UTF-8","auth-token":localStorage.getItem("token")}}).then((function(s){var r=[];if(s.data.itinerary===[])alert("Aucun Itineraire trouv\xe9.");else{alert("Itineraire pr\xeat.");var n,i=0,o=0,c=0,l=0,d=0,u=0,h=Object(V.a)(s.data.itinerary);try{for(h.s();!(n=h.n()).done;){var p=n.value;l=60*((o=(i+=p.routes[0].duration/60)/60)-(c=Math.floor(o))),d=Math.round(l),u+=p.routes[0].distance/1e3}}catch(y){h.e(y)}finally{h.f()}t.push("Dur\xe9e: "+c+" hour(s) and "+d+" minute(s)."),t.push("Distance: "+Math.round(100*u/100)+"km.");var b,m=Object(V.a)(s.data.itinerary);try{for(m.s();!(b=m.n()).done;){var j,f=b.value,g=Object(V.a)(f.routes[0].legs[0].steps);try{for(g.s();!(j=g.n()).done;){var v=j.value;"depart"===v.maneuver.type||"arrive"===v.maneuver.type?t.push(v.maneuver.instruction+"."):t.push(v.maneuver.instruction+". Dans "+v.maneuver.bearing_before+"m. ");var x,O=Object(V.a)(v.geometry.coordinates);try{for(O.s();!(x=O.n()).done;){var A=x.value;r.push(A)}}catch(y){O.e(y)}finally{O.f()}}}catch(y){g.e(y)}finally{g.f()}}}catch(y){m.e(y)}finally{m.f()}e(r,10),a.fetchSteps(t)}})).catch((function(e){console.error(e.response.status),401===e.response.status&&alert("Connexion refus\xe9e")})),s.setState({addressChoice:"",addresses:[],addressTMP:{value:{lng:0,lat:0},label:""},tabAddressTMP:[],start:{lng:0,lat:0},tabAdressesName:[],steps:[]})):alert("Nombre d'adresse insufisant.")},s.saveItinary=function(){alert("Itin\xe9raire sauvegard\xe9e"),N.a.post("http://127.0.0.1:3001/itinerary/save",{email:localStorage.getItem("email"),data:{start:s.state.start,coords:s.state.addresses,len:s.state.addresses.length}}).then((function(e){console.log(e)})).catch((function(e){console.error(e)}))},s.initAddressInputSelection=function(){var e=s.state.addresses,t=s.state.tabAddressTMP;return t.includes(s.state.addressTMP.label)?(alert("Vous avez d\xe9j\xe0 choisie cette adresse."),s.setState({start:s.state.start,addresses:e,addressChoice:"",tabAdressesName:[],steps:[],addressTMP:s.state.addressTMP,tabAddressTMP:t}),0):(t.push(s.state.addressTMP.label),e.length>0&&e.push(s.state.addressTMP.value),s.setState({start:s.state.start,addresses:e,addressChoice:"",tabAdressesName:[],steps:[],addressTMP:s.state.addressTMP,tabAddressTMP:t}),alert("Adresse enregistr\xe9."),1)},s.fetchSteps=function(e){s.setState({addressChoice:s.state.addressChoice,addresses:s.state.addresses,start:s.state.start,tabAdressesName:s.state.tabAdressesName,steps:e,addressTMP:s.state.addressTMP})},s.state={start:{lng:0,lat:0},addresses:[],addressChoice:"",tabAdressesName:[],steps:[],canSave:!1,addressTMP:{value:{lng:0,lat:0},label:""},tabAddressTMP:[]},s}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.mapLine,n=this.state.steps.map((function(e,t){return Object(s.jsx)("li",{children:e},t)})),i=this.state.tabAddressTMP.map((function(e){return Object(s.jsx)("li",{children:e},e)}));return Object(s.jsxs)(z.a,{className:a.root,children:[Object(s.jsx)(B.a,{avatar:Object(s.jsx)(g.a,{className:a.avatar,children:"U"}),title:"Driver itinerary",subheader:"Select your addresses:",className:a.subHeader}),Object(s.jsxs)(R.a,{children:[Object(s.jsxs)("div",{className:a.blockSearch,children:[Object(s.jsx)(O.a,{label:"Address...",variant:"outlined",InputProps:{type:"search"},onChange:function(t){return e.setState({addressChoice:t.target.value,tabAdressesName:e.state.tabAdressesName,addresses:e.state.addresses,start:e.state.start,addressTMP:e.state.addressTMP,tabAddressTMP:e.state.tabAddressTMP})},className:a.input}),Object(s.jsx)(X.a,{type:"submit",className:a.iconButton,"aria-label":"search",onClick:this.getCoordFromApi,children:Object(s.jsx)(W.a,{})})]}),Object(s.jsx)(Z.a,{className:a.inputSelect,menuPortalTarget:document.body,menuPosition:"fixed",isSearchable:!0,options:this.state.tabAdressesName,onChange:function(t){if(t)if(0===e.state.start.lat&&0===e.state.start.lng)e.setState({addressChoice:e.state.addressChoice,tabAdressesName:e.state.tabAdressesName,addresses:e.state.addresses,start:t.value,steps:e.state.steps,addressTMP:t,tabAddressTMP:e.state.tabAddressTMP});else{var a=e.state.addresses;a.push(t.value),e.setState({addressChoice:t.label,tabAdressesName:e.state.tabAdressesName,addresses:a,start:e.state.start,steps:e.state.steps,addressTMP:t,tabAddressTMP:e.state.tabAddressTMP})}}}),Object(s.jsx)(X.a,{type:"submit",className:a.addIconButton,"aria-label":"add",onClick:this.initAddressInputSelection,children:Object(s.jsx)(J.a,{})}),Object(s.jsx)(v.a,{onClick:function(){return e.searchItinary(r)},className:a.validateButton,children:" Valider"}),Object(s.jsx)(v.a,{disabled:!this.state.canSave,onClick:function(){return e.saveItinary()},className:a.iconButton,children:" Sauvegarder"}),Object(s.jsx)("ul",{className:a.addressesInfo,children:i}),Object(s.jsx)("ul",{className:a.stepsInfo,children:n})]}),Object(s.jsx)(v.a,{className:a.switchButton,href:"/history",variant:"contained",children:"Historique"})]})}}]),a}(n.a.PureComponent);Y.Display=Object(h.a)(F)(Y);var G=a(182),Q=a(188),K=a(189),_=function(e){return Object(p.a)({root:{display:"block",position:"relative",backgroundColor:"#000000",height:"100%",color:"white",opacity:.9,borderRadius:0,zIndex:1,overflow:"hidden"},media:{height:"0px",paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},avatar:{margin:"10px",backgroundColor:"white",color:"#000000"},input:{backgroundColor:"white",borderRadius:"4px",color:"black",margin:"10px",width:"200px"},subHeader:{" & span":{color:"white"}},iconButton:{padding:10,backgroundColor:"white",color:"blue"},select:{backgroundColor:"white",borderRadius:"4px",color:"black"},addIconButton:{paddingLeft:10,backgroundColor:"white",color:"blue"},inputSelect:{backgroundColor:"white",borderRadius:"4px",color:"black",margin:"10px",width:"200px"},switchButton:{position:"fixed",bottom:"10px",left:"7%",marginLeft:"-104.5px"}})},$=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).apiUrl="http://localhost:3001/itinerary/load",s.state=void 0,s.loadItinerary=function(e,t){console.log(t),N.a.post("http://127.0.0.1:3001/itinerary",{start:t.start,coords:t.coords,len:t.len},{headers:{"Content-Type":"application/json; charset=UTF-8","auth-token":localStorage.getItem("token")}}).then((function(t){var a=[];if(t.data.itinerary===[])alert("Aucun Itineraire trouv\xe9.");else{var s,r=Object(V.a)(t.data.itinerary);try{for(r.s();!(s=r.n()).done;){var n,i=s.value,o=Object(V.a)(i.routes[0].legs[0].steps);try{for(o.s();!(n=o.n()).done;){var c,l=n.value,d=Object(V.a)(l.geometry.coordinates);try{for(d.s();!(c=d.n()).done;){var u=c.value;a.push(u)}}catch(h){d.e(h)}finally{d.f()}}}catch(h){o.e(h)}finally{o.f()}}}catch(h){r.e(h)}finally{r.f()}e(a,10)}})).catch((function(e){console.error(e),401===e.response.status&&alert("Connexion refus\xe9e")}))},s.state={itineraries:[],email:localStorage.getItem("email")},s}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;N.a.post(this.apiUrl,{email:this.state.email},{headers:{"Content-Type":"application/json; charset=UTF-8","auth-token":localStorage.getItem("token")}}).then((function(t){console.log(t.data.histories),e.setState({itineraries:t.data.histories})})).catch((function(e){console.log(e.response),401===e.response.status&&alert("Connexion refus\xe9e")}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.mapLine;return Object(s.jsxs)(z.a,{className:a.root,children:[Object(s.jsx)(B.a,{avatar:Object(s.jsx)(g.a,{className:a.avatar,children:"U"}),title:"Itinerary history",className:a.subHeader}),Object(s.jsx)(R.a,{children:Object(s.jsx)(G.a,{component:"nav","aria-label":"main mailbox folders",children:this.state.itineraries.map((function(t,a){return Object(s.jsxs)(Q.a,{button:!0,selected:!0,onClick:function(){return e.loadItinerary(r,t.itineraryData)},children:[Object(s.jsx)(K.a,{primary:"Itin\xe9raire N\xb0="+(a+1)}),t.date]})}))})}),Object(s.jsx)(v.a,{className:a.switchButton,href:"/drive",variant:"contained",children:"G\xe9nerateur"})]})}}]),a}(n.a.PureComponent);$.Display=Object(h.a)(_)($);var ee=function(e){return Object(p.a)({container:{maxHeight:"100%"},mainMenu:{top:"0px",marginLeft:"0px",position:"absolute",minHeight:"200px",height:"100%",width:"30%"}})},te=a(51),ae=a.n(te),se=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).state=void 0,s.addItinaryLine=function(e,t){s.setState({coords:e,center:e[0],zoom:t})},s.state={coords:[],center:[2.3488,48.8534],zoom:6},s}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.classes,t=this.state.coords,a=this.props.isHistory;ae.a.accessToken="pk.eyJ1IjoibWFyY2RldmVsb3BlciIsImEiOiJja2l1M2Y4bHgydzVuMnVxam41NTN1dGRrIn0.5EyahHfPXV8fdllizu949A";var r=new ae.a.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:this.state.center,zoom:this.state.zoom});return r.on("load",(function(){t.length>0&&((new ae.a.Marker).setLngLat(t[0]).addTo(r),(new ae.a.Marker).setLngLat(t[t.length-1]).addTo(r)),r.addSource("route",{type:"geojson",data:{type:"Feature",properties:{zoom:10},geometry:{type:"LineString",coordinates:t}}}),r.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#0000FF","line-width":3}})})),a?Object(s.jsx)("div",{id:"geocoding",className:e.mainMenu,children:Object(s.jsx)($.Display,{mapLine:this.addItinaryLine})}):Object(s.jsx)("div",{id:"geocoding",className:e.mainMenu,children:Object(s.jsx)(Y.Display,{mapLine:this.addItinaryLine})})}}]),a}(r.PureComponent);se.Display=Object(h.a)(ee)(se);var re=function(e){return Object(p.a)({layout:{height:"100%",maxHeight:"100%"},logo:{width:"auto",height:"100px"},map:{height:"100%",width:"100%"},headerBar:{height:"90px"}})},ne=function(e){return Object(p.a)({headerBar:{flexDirection:"row",display:"flex",minHeight:"64px",backgroundColor:"black",color:"white",justifyContent:"space-between",overflow:"hidden"},img:{height:"90px",left:"0px",overflow:"hidden"},title:{justifyContent:"space-between",right:"0px"}})},ie=a(95),oe=a.n(ie),ce=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).disconnect=function(){s.setState({redirect:!0}),localStorage.setItem("token",""),localStorage.setItem("email","")},s.state={redirect:!1},s}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.logo,n=t.name;return this.state.redirect?Object(s.jsx)(j.a,{to:"/auth/signIn"}):Object(s.jsxs)(A.a,{container:!0,className:a.headerBar,children:[Object(s.jsx)(A.a,{item:!0,className:a.img,children:r()}),Object(s.jsxs)(A.a,{item:!0,children:[Object(s.jsx)(A.a,{item:!0,className:a.title,children:n}),Object(s.jsx)(X.a,{color:"primary",onClick:function(){return e.disconnect()},component:"span",children:Object(s.jsx)(oe.a,{color:"error",fontSize:"large"})})]})]})}}]),a}(r.PureComponent);ce.Display=Object(h.a)(ne)(ce);var le="data:image/png;base64,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",de=a(191),ue=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.classes;return Object(s.jsxs)("div",{className:e.layout,children:[Object(s.jsx)("div",{className:e.headerBar,children:Object(s.jsx)(ce.Display,{logo:function(){return Object(s.jsx)("img",{className:e.logo,src:le,alt:"Uber-Driver"})},name:Object(s.jsx)("div",{children:" "})})}),Object(s.jsx)(de.a,{id:"map",className:e.map,center:[2.3488,48.8534],zoom:6,children:Object(s.jsx)(se.Display,{isHistory:!1})}),Object(s.jsx)(m.a,{children:Object(s.jsx)(j.d,{children:Object(s.jsx)(j.a,{to:"/drive"})})})]})}}]),a}(r.PureComponent);ue.Display=Object(h.a)(re)(ue);var he=function(e){return Object(p.a)({layout:{height:"100%"},logo:{width:"auto",height:"100px"},map:{top:"0px",height:"100%",width:"100%"},headerBar:{height:"90px"}})},pe=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.classes;return Object(s.jsxs)("div",{className:e.layout,children:[Object(s.jsx)("div",{className:e.headerBar,children:Object(s.jsx)(ce.Display,{logo:function(){return Object(s.jsx)("img",{className:e.logo,src:le,alt:"Uber-Driver"})},name:Object(s.jsx)("div",{children:" "})})}),Object(s.jsx)(de.a,{id:"map",className:e.map,center:[2.3488,48.8534],zoom:6,children:Object(s.jsx)(se.Display,{isHistory:!0})}),Object(s.jsx)(m.a,{})]})}}]),a}(r.PureComponent);pe.Display=Object(h.a)(he)(pe);var be=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.classes;return Object(s.jsx)("div",{className:e.layout,children:Object(s.jsx)(m.a,{children:Object(s.jsxs)(j.d,{children:[Object(s.jsx)(j.b,{exact:!0,path:"/auth/signIn",component:U.Display}),Object(s.jsx)(j.b,{exact:!0,path:"/auth/signUp",component:I.Display}),Object(s.jsx)(j.b,{exact:!0,path:"/auth/forgotPassword",component:H.Display}),Object(s.jsx)(j.b,{exact:!0,path:"/drive",component:ue.Display}),Object(s.jsx)(j.b,{exact:!0,path:"/history",component:pe.Display}),Object(s.jsx)(j.a,{to:"/auth/signIn"})]})})})}}]),a}(r.PureComponent);function me(){return Object(s.jsx)(be.Display,{})}be.Display=Object(h.a)(b)(be);var je=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,195)).then((function(t){var a=t.getCLS,s=t.getFID,r=t.getFCP,n=t.getLCP,i=t.getTTFB;a(e),s(e),r(e),n(e),i(e)}))};o.a.render(Object(s.jsx)(n.a.StrictMode,{children:Object(s.jsx)(m.a,{children:Object(s.jsx)(me,{})})}),document.getElementById("root")),je()}},[[148,1,2]]]);
//# sourceMappingURL=main.c8099043.chunk.js.map